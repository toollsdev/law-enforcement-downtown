<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema Integrado - Polícia</title>
    <style>
      :root {
        --primary: #5865f2;
        --primary-hover: #4752c4;
        --success: #3ba55d;
        --bg-dark: #36393f;
        --bg-card: #2f3136;
        --bg-nav: #202225;
        --text-main: #dcddde;
        --text-muted: #b9bbbe;
        --input-bg: #202225;
        --border: #4f545c;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--bg-dark);
        color: var(--text-main);
        margin: 0;
        padding: 0;
        padding-top: 80px;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
      }

      .navbar {
        width: 100%;
        height: 60px;
        background-color: var(--bg-nav);
        display: flex;
        justify-content: center;
        align-items: center;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1000;
        box-shadow: 0 4px 10px rgba(0,0,0,0.5);
      }

      .nav-container {
        width: 100%;
        max-width: 1000px;
        display: flex;
        justify-content: space-around;
        list-style: none;
        margin: 0;
        padding: 0;
      }

      .nav-container li a {
        color: var(--text-muted);
        text-decoration: none;
        font-weight: 600;
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        transition: 0.3s;
      }

      .nav-container li a:hover {
        color: #fff;
        background: rgba(255,255,255,0.05);
      }

      .nav-container li a.active {
        color: var(--primary);
        border-bottom: 2px solid var(--primary);
        border-radius: 0;
      }

      .card {
        background-color: var(--bg-card);
        width: 100%;
        max-width: 480px;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        margin-bottom: 40px;
        display: none; 
      }

      .card.active { display: block; }

      h2 { text-align: center; color: #fff; margin-bottom: 1.5rem; }
      h3 { border-bottom: 1px solid var(--border); padding-bottom: 5px; color: var(--primary); font-size: 1rem; margin-top: 25px; }

      .form-group { margin-bottom: 15px; }
      label { display: block; font-size: 0.75rem; font-weight: bold; color: var(--text-muted); text-transform: uppercase; margin-bottom: 8px; }

      input, select, textarea {
        width: 100%; padding: 10px; border-radius: 4px; border: none;
        background-color: var(--input-bg); color: #fff; box-sizing: border-box; margin-top: 5px;
      }

      .input-row { display: flex; gap: 8px; margin-top: 8px; }

      .photo-area {
        width: 100%;
        min-height: 120px;
        border: 2px dashed var(--border);
        border-radius: 8px;
        margin-top: 10px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        color: var(--text-muted);
        overflow: hidden;
        transition: 0.3s;
        text-align: center;
        padding: 10px;
      }

      .photo-area:hover { border-color: var(--primary); background: rgba(88, 101, 242, 0.05); }
      .photo-area img { max-width: 100%; max-height: 250px; border-radius: 4px; }

      .btn-now { background: #4f545c; color: white; border: none; padding: 0 10px; border-radius: 4px; cursor: pointer; font-size: 0.7rem; text-transform: uppercase; }
      .btn-group { display: flex; gap: 10px; margin-top: 20px; }
      button.main-btn { flex: 1; padding: 12px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; transition: 0.3s; color: white; }
      .btn-generate { background-color: var(--primary); }
      .btn-copy { background-color: var(--success); }

      .result-area { height: 120px; color: #85d296; font-family: 'Courier New', monospace; resize: none; border: 1px solid #202225; margin-top: 20px;}

      .footer { text-align: center; font-size: 0.7rem; color: var(--text-muted); padding: 20px; }
    </style>
  </head>
  <body onload="definirHoraAtual()">

    <nav class="navbar">
      <ul class="nav-container">
        <li><a onclick="showTab('tab-ponto')" id="link-ponto">Ponto</a></li>
        <li><a onclick="showTab('tab-licenca')" id="link-licenca">Licenças</a></li>
        <li><a onclick="showTab('tab-habitantes')" id="link-habitantes" class="active">Habitantes</a></li>
        <li><a onclick="showTab('tab-armas')" id="link-armas">Armas</a></li>
      </ul>
    </nav>

    <div id="tab-ponto" class="card">
      <h2>Registro de Ponto</h2>
      <div class="form-group">
        <label>Informações do Oficial</label>
        <input type="text" id="ponto-nome" placeholder="Nome Completo" />
        <input type="text" id="ponto-patente" placeholder="Patente" style="margin-top: 8px" />
      </div>

      <h3>Entrada em Serviço</h3>
      <div class="form-group">
        <input type="text" id="localEntrada" placeholder="Localidade" />
        <div class="input-row">
          <input type="datetime-local" id="dataEntrada" />
          <button class="btn-now" onclick="setNow('dataEntrada')">Agora</button>
        </div>
      </div>

      <h3>Saída de Serviço</h3>
      <div class="form-group">
        <input type="text" id="localSaida" placeholder="Localidade" />
        <div class="input-row">
          <input type="datetime-local" id="dataSaida" />
          <button class="btn-now" onclick="setNow('dataSaida')">Agora</button>
        </div>
      </div>
      <div class="btn-group">
        <button class="main-btn btn-generate" onclick="gerarPonto()">Gerar</button>
        <button class="main-btn btn-copy" onclick="copiar('res-ponto')">Copiar</button>
      </div>
      <textarea id="res-ponto" class="result-area" readonly></textarea>
    </div>

    <div id="tab-licenca" class="card">
      <h2>Registro de Licença</h2>
      <div class="form-group">
        <label>Proprietário</label>
        <input type="text" id="lic-nome" placeholder="Ex: Finn Reford" />
                <select id="lic-local">
            <option value="" selected>ESCOLHA A REGIÃO</option>
            <option value="NH">New Hanover</option>
            <option value="NA" >New Austin</option>
            <option value="WE" >West Elizabeth</option>
            <option value="LE" >Lemoyne</option>
        </select>

      </div>
      <div class="form-group">
        <label>Dados da Licença</label>
        <select id="lic-tipo">
            <option value="CAÇADOR" selected>CAÇADOR</option>
            <option value="PORTE DE ARMA">PORTE DE ARMA</option>
            <option value="PESCA">PESCA</option>
        </select>
        <div class="input-row">
          <input type="text" id="lic-valor" placeholder="Ex: U$: 10,00" />
          <input type="text" id="lic-validade" value="Não Expira" />
        </div>
      </div>
      <div class="form-group">
        <label>Evidência Fotográfica</label>
        <div class="photo-area" onclick="pasteTarget='preview-licenca'; document.getElementById('file-lic').click()">
          <span id="label-lic">Clique ou Ctrl+V para a Licença</span>
          <img id="preview-licenca" style="display:none" />
        </div>
        <input type="file" id="file-lic" style="display:none" onchange="handleFile(this, 'preview-licenca', 'label-lic')" />
      </div>
      <div class="btn-group">
        <button class="main-btn btn-generate" onclick="gerarLicenca()">Gerar</button>
        <button class="main-btn btn-copy" onclick="copiar('res-licenca')">Copiar</button>
      </div>
      <textarea id="res-licenca" class="result-area" readonly></textarea>
    </div>

    <div id="tab-habitantes" class="card active">
      <h2>Registro de Habitantes</h2>
      <div class="form-group">
        <label>Dados do Habitante</label>
        <input type="text" id="hab-nome" placeholder="Ex: Finn Reford" />
        <div class="input-row">
            <input type="text" id="hab-id" placeholder="ID (Ex: 464)" />
            <input type="text" id="hab-idade" placeholder="Idade (Ex: 29 anos)" />
        </div>
      </div>
      <div class="form-group">
        <label>Foto do Rosto / Perfil</label>
        <div class="photo-area" onclick="pasteTarget='preview-hab'; document.getElementById('file-hab').click()">
          <span id="label-hab">Clique ou Ctrl+V para Foto do Rosto</span>
          <img id="preview-hab" style="display:none" />
        </div>
        <input type="file" id="file-hab" style="display:none" onchange="handleFile(this, 'preview-hab', 'label-hab')" />
      </div>
      <div class="btn-group">
        <button class="main-btn btn-generate" onclick="gerarHabitante()">Gerar Registro</button>
        <button class="main-btn btn-copy" onclick="copiar('res-hab')">Copiar</button>
      </div>
      <textarea id="res-hab" class="result-area" readonly placeholder="O texto formatado aparecerá aqui..."></textarea>
    </div>

    <div id="tab-armas" class="card">
        <h2>Registro de Armas</h2>
        <p style="text-align:center; color: var(--text-muted)">Aguardando campos do registro...</p>
    </div>

    <div class="footer">Sistema Sincronizado v2.5 - 2026</div>

    <script>
      let pasteTarget = 'preview-hab';

      function showTab(tabId) {
        document.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.nav-container li a').forEach(a => a.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        document.getElementById('link-' + tabId.split('-')[1]).classList.add('active');
        if(tabId === 'tab-licenca') pasteTarget = 'preview-licenca';
        if(tabId === 'tab-habitantes') pasteTarget = 'preview-hab';
      }

      function formatarData(dataRaw) {
        if (!dataRaw) return "__/__ - __:__";
        const d = new Date(dataRaw);
        return `${String(d.getDate()).padStart(2, "0")}/${String(d.getMonth() + 1).padStart(2, "0")} - ${String(d.getHours()).padStart(2, "0")}:${String(d.getMinutes()).padStart(2, "0")}`;
      }

      function setNow(id) {
        const agora = new Date();
        agora.setMinutes(agora.getMinutes() - agora.getTimezoneOffset());
        document.getElementById(id).value = agora.toISOString().slice(0, 16);
      }

      function definirHoraAtual() { setNow('dataEntrada'); }

      window.addEventListener('paste', e => {
        const items = e.clipboardData.items;
        for (let i = 0; i < items.length; i++) {
          if (items[i].type.indexOf('image') !== -1) {
            const blob = items[i].getAsFile();
            displayImage(blob, pasteTarget, pasteTarget === 'preview-hab' ? 'label-hab' : 'label-lic');
          }
        }
      });

      function handleFile(input, imgId, labelId) {
        if (input.files && input.files[0]) displayImage(input.files[0], imgId, labelId);
      }

      function displayImage(file, imgId, labelId) {
        const reader = new FileReader();
        reader.onload = e => {
          const img = document.getElementById(imgId);
          img.src = e.target.result;
          img.style.display = 'block';
          document.getElementById(labelId).style.display = 'none';
        };
        reader.readAsDataURL(file);
      }

      function gerarPonto() {
        const n = document.getElementById("ponto-nome").value || "---";
        const p = document.getElementById("ponto-patente").value || "---";
        const e = formatarData(document.getElementById("dataEntrada").value);
        const s = formatarData(document.getElementById("dataSaida").value);
        document.getElementById("res-ponto").value = `> ### **Registro de Ponto**\n> **Oficial:** ${n}\n> **Patente:** ${p}\n\n> **Entrada:** ${e}\n> **Saída:** ${s}`;
      }

      function gerarLicenca() {
        const local = document.getElementById('lic-local').value; 
  
        if(local === "") return alert("Por favor, selecione uma região!");
        const d = {
          n: document.getElementById('lic-nome').value,
          l: document.getElementById('lic-local').value,
          t: document.getElementById('lic-tipo').value,
          v: document.getElementById('lic-valor').value,
          e: document.getElementById('lic-validade').value
        };
        document.getElementById('res-licenca').value = `> ### **REGISTRO DE LICENÇA**\n> **Proprietário:** ${d.n}\n> **Local:** ${d.l}\n> **Licença:** ${d.t}\n> **Valor:** ${d.v}\n> **Validade:** ${d.e}\n\n> **[EVIDÊNCIA FOTOGRÁFICA ANEXADA]**`;
      }

      function gerarHabitante() {
        const n = document.getElementById('hab-nome').value || "Não informado";
        const i = document.getElementById('hab-id').value || "N/A";
        const d = document.getElementById('hab-idade').value || "N/A";
        
        const template = `> ### **REGISTRO DE HABITANTE**
> **Nome:** ${n}
> **ID:** ${i}
> **Idade:** ${d}

> **[FOTO DE RECONHECIMENTO ANEXADA]**`;
        document.getElementById('res-hab').value = template;
      }

      function copiar(id) {
        const t = document.getElementById(id);
        if(!t.value) return alert("Gere o texto primeiro!");
        navigator.clipboard.writeText(t.value);
        alert("Copiado!");
      }
    </script>
  </body>
</html>
